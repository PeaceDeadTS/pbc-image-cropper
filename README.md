# PBC Image Cropper

**Image Cropper for PBC** – web‑приложение для профессиональной обрезки изображений по стандарту PBC с фиксированным соотношением сторон 2:3, поддержкой других пресетов, зума, поворота и удобного экспорта.

Приложение полностью клиентское (SPA на React + Vite) и готово к деплою как статический сайт.

---

## Features

- **PBC Standard (2:3)** – основной сценарий, с жёстким ограничением соотношения сторон и поддержкой пресетов `Output Size`.
- **Другие соотношения**:
  - 16:9, 4:3, 1:1 – фиксированные пресеты.
  - Free Form – произвольная рамка (соотношение не фиксировано).
- **Output Size**:
  - Пресеты доступны **только** в режиме PBC Standard (2:3).
  - Во всех остальных режимах всегда используется `Original Resolution`, селектор размера отключён.
  - Пресеты, у которых целевая высота больше исходной высоты изображения, отключены и помечены `(unavailable)`.
- **Zoom & панорамирование**:
  - Авто‑зу́м при загрузке – по высоте контейнера, чтобы изображение целиком помещалось по вертикали.
  - Слайдер зума регулирует масштаб **относительно базового авто‑зума**, давая плавное управление без резких скачков.
  - Перемещение изображения внутри рамки (drag‑to‑move).
- **Поворот**:
  - Кнопка поворота на +90° (циклически 0 → 90 → 180 → 270 → 0).
- **Превью и финальное разрешение**:
  - Панель `Cropped Preview` показывает результат кадрирования.
  - Подпресчитанное разрешение результата соответствует реальному экспортируемому изображению.
- **Экспорт**:
  - Формат вывода по умолчанию совпадает с исходным файлом (`image/jpeg`, `image/png`, `image/webp`).
  - Имя файла редактируется inline в текстовом поле.
  - Справа от имени отображается расширение файла (`.jpg`, `.png`, `.webp`).
  - Кнопка `Save Image` сразу скачивает файл без дополнительных модальных окон.
- **i18n**:
  - Поддержка как минимум двух языков: **en** / **ru** (через `i18next` + `react-i18next`).
  - Переключатель языка в шапке.

---

## Tech Stack

- **Framework**: React 18 (SPA, Vite)
- **Language**: TypeScript
- **Bundler / Dev server**: Vite 5
- **UI**: shadcn/ui + Radix UI + Tailwind CSS
- **Cropper**: `react-cropper` + `cropperjs`
- **State / Forms**: React hooks, `react-hook-form`, `zod`
- **i18n**: `i18next`, `react-i18next`, `i18next-browser-languagedetector`
- **Notifications**: `sonner`

Полный список зависимостей см. в `package.json`.

---

## Getting Started

### Requirements

- Node.js (рекомендуется LTS 18+)
- npm или совместимый пакетный менеджер (pnpm, yarn – при необходимости адаптируйте команды)

### Install

```bash
npm install
```

### Development

```bash
npm run dev
```

По умолчанию Vite поднимает dev‑сервер на `http://localhost:5173` (или другом свободном порту).

### Build

```bash
npm run build
```

Собранные статические файлы будут в папке `dist/`.

### Preview (serve production build)

```bash
npm run preview
```

### Lint

```bash
npm run lint
```

---

## Usage

1. Загрузите изображение (drag & drop или кнопкой “Browse Files”).
2. При необходимости выберите режим соотношения сторон:
   - `PBC Standard (2:3)` – основной кейс, доступен выбор `Output Size`.
   - `Free Form` или другие пресеты (16:9, 4:3, 1:1) – рамка фиксируется или свободна, но всегда с `Original Resolution`.
3. Отмасштабируйте и сдвиньте изображение при помощи зума и drag‑move.
4. При необходимости поверните изображение кнопкой поворота.
5. В правой колонке отредактируйте имя файла и убедитесь, что вас устраивает расширение.
6. Нажмите **Save Image** – файл будет скачан в выбранном формате и с текущим кадрированием.

Все изменения соотношения сторон и размера вывода немедленно отражаются в рамке cropper'а и превью.

---

## Project Guidelines

Для любых инфраструктурных/архитектурных изменений, а также при добавлении новых фич следует руководствоваться:

- `.windsurf/rules/react.mdc`
- `.windsurf/rules/tailwind.mdc`
- `.windsurf/rules/typescript.mdc`
- [`PROJECT_CONSTITUTION.md`](./PROJECT_CONSTITUTION.md)

Новые возможности не должны ломать основной поток PBC 2:3 и гарантию того, что **превью и сохранённое изображение всегда соответствуют области кадрирования**.

